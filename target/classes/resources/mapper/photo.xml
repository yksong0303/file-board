<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Photo">

	<insert id="insertPb" parameterType="pb">
		insert into
		photo_board(pb_num,pb_title,pb_content,pb_photo_name,pb_photo_path,credat,cretim)
		values(seq_pbNum.nextval,
		#{pbTitle},
		#{pbContent},
		<if test="pbPhotoName==null">
		null,null,
		</if>
		<if test="pbPhotoName!=null">
		#{pbPhotoName},#{pbPhotoPath},
		</if>
		TO_CHAR(sysdate,'YYYYMMDD'),
		 TO_CHAR(sysdate,'HH24MISS'))
	</insert>
	
	<select id="selectPbList" resultType="pb">
		  select * from (select rownum rcnt, pb.* from
		(select * from photo_board order by pb_num desc) pb
		where rownum&lt;=#{page.lastNum}) where rcnt&gt;=#{page.startNum}
	</select>
	
	 <select id="selectPhotoBoardCount" resultType="int">
    select count(1) from photo_board
   </select>
</mapper>